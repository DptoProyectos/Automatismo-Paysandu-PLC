(*2*)
(* Network 0 *)
(*SALIDAS DIGITALES ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------DO_0 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------CONTROL (0 -> Modo de Emergencia | 1 -> Modos Local y Remoto)*)
LD    %M100.0
ST   %Q0.0
(* Network 1 *)
(*SALIDAS DIGITALES DO_1 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------START (0 -> Prender bomba | 1 -> Apagar bomba)*)
LD    %M100.1
ST   %Q0.1
(* Network 2 *)
(*SALIDAS DIGITALES DO_2 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------UP_FREC (Trenes de pulsos para que el variador disminuya la frecuencia)*)
LD    %M100.3
ST   %Q0.2
(* Network 3 *)
(*SALIDAS DIGITALES DO_3 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------DOWN_FREC (Trenes de pulsos para que el variador aumente la frecuencia)*)
LD    %M100.2
ST   %Q0.3
(* Network 4 *)
(*SALIDAS DIGITALES DO_4 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------VALVE (0 -> Válvula abierta | 1 -> Válvula cerrada)*)
LD    %M100.4
STN   %Q0.4
(* Network 5 *)
(*REGISTRO MODBUS ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------MODO ACTUAL DE TRABAJO ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------100 -> EMERGENCIA101 -> LOCAL102 -> REMOTO*)
LD    TRUE
B_TO_I    MODE, int0
MOVE    int0, mReg2067
ADD    100, mReg2067
(* Network 6 *)
(*REGISTRO MODBUSSEÑAL DE ACTUALIZACION DE MODO  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------100 -> HMI y web sincronizados101 -> hmi pide cambio a modo emergencia a la web102 -> hmi pide cambio a modo remotor a la web103 -> hmi pide cambio a modo local a la web105 -> web pide cambio a modo emergencia al hmi106 -> web pide cambio a modo remoto al hmi107 -> web pide cambio a modo local al hmi*)
LD    TRUE
MOVE    ModeUpdate, mReg2097
ADD    100, mReg2097
(* Network 7 *)
(*REGISTRO MODBUSPRESION DE SELLOS ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*)
LD    TRUE
MOVE    PRESION, mReg2068
(* Network 8 *)
(*REGISTRO MODBUSCAUDAL DE SELLOS ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*)
LD    TRUE
MOVE    CAUDAL_SELLOS, mReg2070
(* Network 9 *)
(*REGISTRO MODBUSFLIJO DE SELLOS ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*)
LD    %M101.7
ST   %V3982.0
(* Network 10 *)
(*REGISTRO MODBUSALTURA DE LA CAMARA ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*)
LD    TRUE
MOVE    H_CAMARA, mReg2072
(* Network 11 *)
(*REGISTRO MODBUSESTADO DE LA BOMBA ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*)
LD    %M102.6
ST   %V3982.1
(* Network 12 *)
(*REGISTRO MODBUSALARMA DE PRESION  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*)
LD    %M102.0
ST   %V3982.2
(* Network 13 *)
(*REGISTRO MODBUSALARMA DE CAUDAL ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*)
LD    %M102.1
ST   %V3982.3
(* Network 14 *)
(*REGISTRO MODBUSALARMA DE FLUJO---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*)
LD    %M102.2
ST   %V3982.4
(* Network 15 *)
(*REGISTRO MODBUSALARMA DE FALLA EN EL VARIADOR ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*)
LD    %M104.0
ST   %V3982.5
(* Network 16 *)
(*REGISTRO MODBUSESTADO DEL VARIADOR ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*)
LD    %M104.1
ST   %V3982.6
(* Network 17 *)
(*REGISTRO MODBUSESTADO DE LINEA  EN EL VARIADOR ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*)
LD    %M104.2
ST   %V3982.7
(* Network 18 *)
(*REGISTRO MODBUSCONDICION DE DATOS VALIDOS  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------Cuando al server llega los msb con valores 101x xxxx xxxx xxxx xxxx se toma como datos validos*)
LD    TRUE
STN   %V3983.7
ST   %V3983.6
STN   %V3983.5
ST   %V3983.4
(* Network 19 *)
(*REGISTRO MODBUSFRECUENCIA DE TRABAJO DEL  VARIADOR ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*)
LD    TRUE
MOVE    VAR_FREC, mReg2074
(* Network 20 *)
(*REGISTRO MODBUSCORRIENTE DE DE LA BOMBA  ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*)
LD    TRUE
MOVE    VAR_CURR, mReg2076
(* Network 21 *)
(*REGISTRO MODBUSTEMPERATURA DE LA BOMBA ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------*)
LD    TRUE
MOVE    VAR_TEMPR, mReg2078
(* Network 22 *)
(*REGISTRO MODBUSPULSOS DE FRECUENCIA ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------Señal que indica los pulsos de frecuencia que se deben actualizar*)
LD    TRUE
MOVE    M_FreqUpdate, mReg2098
ADD    100, mReg2098
